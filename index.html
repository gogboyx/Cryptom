<!doctype html>
<html lang="en"> 
 <head> 
  <meta charset="UTF-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <title>Musician Star Simulator</title> 
  <link rel="stylesheet" href="styles.css"> 
 <style type="text/css" id="dcoder_stylesheet">body {
    font-family: Arial, sans-serif;
    background-color: #121212;
    color: #ffffff;
    margin: 0;
    padding: 0;
}

.container {
    max-width: 100%;
    margin: 0 auto;
    padding: 20px;
    padding-bottom: 80px; /* Add padding to ensure content isnâ€™t hidden behind the navigation bar */
}

.screen {
    display: none;
}

.screen.active {
    display: block;
}

/* Main Menu Styles */
.main-menu {
    text-align: center;
    padding-top: 50px;
}

.main-menu h1 {
    font-size: 36px;
    margin-bottom: 40px;
    color: #1db954;
}

.menu-buttons {
    display: flex;
    flex-direction: column;
    gap: 20px;
    max-width: 300px;
    margin: 0 auto;
}

/* Save Slots Styles */
.save-slots {
    text-align: center;
}

.save-slot-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 15px;
    padding: 20px;
}

.save-slot {
    background-color: #2a2a2a;
    border-radius: 10px;
    padding: 20px;
    font-size: 18px;
    cursor: pointer;
    transition: transform 0.3s ease, background-color 0.3s ease;
}

.save-slot:hover {
    transform: scale(1.05);
    background-color: #3a3a3a;
}

.character-creation {
    text-align: center;
}

.character-creation h2 {
    font-size: 24px;
    margin-bottom: 20px;
}

.creation-section {
    margin: 15px 0;
    color: #b3b3b3;
}

.creation-section label {
    display: block;
    margin-bottom: 5px;
    font-size: 16px;
}

.creation-section input,
.creation-section select {
    width: 100%;
    max-width: 300px;
    padding: 8px;
    margin-bottom: 10px;
    border-radius: 5px;
    border: 1px solid #b3b3b3;
    background-color: #2a2a2a;
    color: #ffffff;
}

.upload-section {
    margin: 15px 0;
    color: #b3b3b3;
}

.upload-section label {
    display: block;
    margin-bottom: 5px;
    font-size: 16px;
}

.upload-section input {
    margin-bottom: 10px;
}

.preview-img {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    object-fit: cover;
    display: block;
    margin: 10px auto;
    border: 2px solid #b3b3b3;
}

.action-btn {
    background-color: #1db954;
    color: #fff;
    border: none;
    padding: 10px 20px;
    border-radius: 20px;
    cursor: pointer;
    font-size: 16px;
    margin: 20px auto;
    display: block;
    width: 90%;
    max-width: 300px;
    margin-bottom: 20px; /* Add spacing between the button and the navigation bar */
}

.action-btn:hover {
    background-color: #1ed760;
}

.social-platforms {
    text-align: center;
}

.social-platforms h2 {
    font-size: 24px;
    margin-bottom: 20px;
}

.welcome-text {
    font-size: 28px;
    margin-bottom: 10px;
}

.info-text {
    font-size: 16px;
    color: #b3b3b3;
    margin: 5px 0;
}

.platform-circle {
    background-color: #1a73e8;
    border-radius: 50%;
    width: 300px;
    height: 300px;
    margin: 20px auto;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.artist-profile-img {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid #ffffff;
}

.notification-bar {
    display: flex;
    justify-content: space-around;
    background-color: #2a2a2a;
    padding: 10px 0;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    border-top: 1px solid #282828;
    z-index: 1000;
}

.nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.nav-icon {
    width: 30px;
    height: 30px;
    cursor: pointer;
}

.nav-label {
    font-size: 12px;
    color: #b3b3b3;
    margin-top: 5px;
}

.home-screen {
    text-align: center;
}

.stats-bar {
    background-color: #2a2a2a;
    padding: 10px;
    position: sticky;
    top: 0;
    display: flex;
    justify-content: space-around;
    border-bottom: 1px solid #282828;
}

.stat {
    font-size: 16px;
    color: #b3b3b3;
    display: flex;
    align-items: center; /* Align icon and text vertically */
}

.stat-icon {
    width: 20px;
    height: 20px;
    margin-right: 5px; /* Space between icon and text */
    object-fit: contain; /* Ensure icons maintain aspect ratio */
}

.stat span {
    color: #ffffff;
    font-weight: bold;
}

.date-display {
    font-size: 18px;
    margin: 20px 0;
}

/* Social Screen Styles */
.social-screen {
    text-align: center;
}

.platform-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    padding: 10px;
}

.platform-item {
    background-color: #2a2a2a;
    border-radius: 10px;
    padding: 15px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    cursor: pointer; /* Make the platform items clickable */
}

.platform-logo {
    width: 50px;
    height: 50px;
    margin-bottom: 10px;
    object-fit: contain; /* Ensure logos maintain aspect ratio */
}

.platform-name {
    font-size: 16px;
    color: #ffffff;
}

/* Spotify Screen Styles */
.spotify-screen {
    text-align: center;
    position: relative; /* For positioning the back button */
}

.spotify-header {
    padding: 30px 20px; /* Increased padding for better spacing */
    background: linear-gradient(to bottom, #2a2a2a, #1a1a1a); /* Smoother gradient */
    position: relative; /* For positioning the back button */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* Subtle shadow for depth */
}

.back-btn {
    position: absolute;
    top: 20px;
    left: 20px;
    width: 24px;
    height: 24px;
    cursor: pointer;
}

.spotify-profile-img {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid #ffffff;
    margin-bottom: 15px; /* Increased margin for better spacing */
}

.spotify-artist-name {
    font-size: 32px;
    font-weight: 700; /* Slightly bolder for emphasis */
    margin: 10px 0;
}

.spotify-stats {
    font-size: 14px;
    color: #b3b3b3;
    margin: 5px 0;
}

.spotify-content {
    padding: 30px 20px; /* Increased padding for better spacing */
}

.spotify-section {
    margin-bottom: 40px; /* Increased margin for better separation */
    text-align: left;
}

.spotify-section h2 {
    font-size: 20px;
    font-weight: 600; /* Slightly bolder for emphasis */
    margin-bottom: 15px; /* Increased margin for better spacing */
}

.empty-text {
    font-size: 14px;
    color: #b3b3b3;
    font-style: italic;
}

.about-artist-content {
    background-color: #2a2a2a;
    border-radius: 10px;
    padding: 20px; /* Increased padding for better spacing */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* Subtle shadow for depth */
}

.about-artist-img {
    width: 100%;
    max-width: 200px;
    height: auto;
    border-radius: 10px;
    margin-bottom: 15px; /* Increased margin for better spacing */
    object-fit: cover;
}

#spotify-bio {
    font-size: 16px;
    color: #ffffff;
    margin-top: 10px;
}

.spotify-nav-bar {
    display: flex;
    justify-content: space-around;
    background-color: #2a2a2a;
    padding: 10px 0;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    border-top: 1px solid #282828;
    z-index: 1000;
}

/* Distributor Screen Styles */
.distributor-screen {
    text-align: center;
}

.distributor-header {
    padding: 20px;
    position: relative;
}

.distributor-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px; /* Reduced gap for mobile */
    padding: 10px;
}

.distributor-item {
    background-color: #2a2a2a;
    border-radius: 10px;
    padding: 10px; /* Reduced padding for mobile */
    text-align: center;
    cursor: pointer;
    transition: transform 0.3s ease, background-color 0.3s ease;
}

.distributor-item:hover {
    transform: scale(1.05);
    background-color: #3a3a3a;
}

.distributor-logo {
    width: 50px;
    height: 50px;
    margin-bottom: 8px;
    object-fit: contain;
}

.distributor-name {
    font-size: 16px;
    font-weight: bold;
}

.distributor-item p {
    font-size: 14px;
    color: #b3b3b3;
    margin: 5px 0 0;
}

.distributor-options {
    text-align: center;
}

.action-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    padding: 10px;
}

.create-song, .create-album, .song-selection, .album-genre-selection {
    text-align: center;
}

.unreleased-screen, .released-screen {
    text-align: center;
}

.unreleased-item, .released-item {
    background-color: #2a2a2a;
    border-radius: 10px;
    padding: 15px;
    margin: 10px 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: transform 0.3s ease;
}

.unreleased-item:hover, .released-item:hover {
    transform: translateX(5px);
}

.release-item {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
}

.release-cover {
    width: 50px;
    height: 50px;
    border-radius: 5px;
    object-fit: cover;
    margin-right: 10px;
}

/* Updated styles for the Popular section */
#popular-releases, #popular-songs {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.release-item {
    display: flex;
    align-items: center;
    gap: 10px;
}

.release-rank {
    width: 20px;
    font-size: 16px;
    color: #ffffff;
    font-weight: bold;
}

.release-cover {
    width: 50px;
    height: 50px;
    border-radius: 5px;
    object-fit: cover;
}

.release-info {
    flex: 1;
}

.release-title {
    font-size: 16px;
    color: #ffffff;
    margin: 0;
}

.release-streams {
    font-size: 14px;
    color: #b3b3b3;
    margin: 0;
}

.see-more-btn {
    background: none;
    border: 1px solid #b3b3b3;
    color: #b3b3b3;
    padding: 5px 15px;
    border-radius: 20px;
    cursor: pointer;
    font-size: 14px;
    margin-top: 10px;
    align-self: center;
}

.see-more-btn:hover {
    border-color: #ffffff;
    color: #ffffff;
}

/* Activity Screen Styles */
.activity-screen {
    text-align: center;
}

.activity-section {
    margin-bottom: 40px;
    text-align: left;
}

.activity-section h2 {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 15px;
}

#current-job {
    background-color: #2a2a2a;
    border-radius: 10px;
    padding: 15px;
    margin-bottom: 15px;
}

#current-job p {
    font-size: 16px;
    color: #ffffff;
    margin: 0 0 10px 0;
}

#current-job-name {
    font-weight: bold;
}

#job-list, #event-list {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    padding: 10px;
}

.job-item, .event-item {
    background-color: #2a2a2a;
    border-radius: 10px;
    padding: 15px;
    text-align: center;
    cursor: pointer;
    transition: transform 0.3s ease, background-color 0.3s ease;
}

.job-item:hover, .event-item:hover {
    transform: scale(1.05);
    background-color: #3a3a3a;
}

.job-name, .event-name {
    font-size: 16px;
    font-weight: bold;
    display: block;
    margin-bottom: 5px;
}

.job-item p, .event-item p {
    font-size: 14px;
    color: #b3b3b3;
    margin: 0;
}

/* Media Query for Mobile Devices (screens smaller than 600px) */
@media (max-width: 600px) {
    .distributor-grid, #job-list, #event-list {
        grid-template-columns: 1fr; /* Single column for mobile */
        gap: 8px; /* Further reduced gap */
        padding: 5px;
    }

    .distributor-item, .job-item, .event-item {
        padding: 8px; /* Further reduced padding */
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .distributor-logo {
        width: 40px; /* Reduced logo size for mobile */
        height: 40px;
        margin-bottom: 5px;
    }

    .distributor-name, .job-name, .event-name {
        font-size: 14px; /* Reduced font size */
    }

    .distributor-item p, .job-item p, .event-item p {
        font-size: 12px; /* Reduced font size for royalties text */
        margin: 3px 0 0;
    }

    .distributor-header h2 {
        font-size: 20px; /* Slightly smaller header */
    }

    .container {
        padding: 10px; /* Reduced padding for mobile */
        padding-bottom: 70px; /* Adjust for smaller nav bar */
    }

    .notification-bar {
        padding: 8px 0; /* Slightly smaller padding */
    }

    .nav-icon {
        width: 25px; /* Slightly smaller icons */
        height: 25px;
    }

    .nav-label {
        font-size: 10px; /* Smaller labels */
    }
}</style></head> 
 <body> 
  <div class="container"> 
   <!-- Main Menu Screen -->
   <div class="screen main-menu active" id="main-menu">
    <h1>Musician Star Simulator</h1>
    <div class="menu-buttons">
     <button class="action-btn" onclick="showScreen('save-slots')">Play</button>
     <button class="action-btn" onclick="alert('Settings coming soon!')">Settings</button>
     <button class="action-btn" onclick="window.close()">Exit</button>
    </div>
   </div>

   <!-- Save Slots Screen -->
   <div class="screen save-slots" id="save-slots">
    <h2>Select a Save Slot</h2>
    <div class="save-slot-grid">
     <div class="save-slot" onclick="selectSaveSlot(1)">Save Slot 1</div>
     <div class="save-slot" onclick="selectSaveSlot(2)">Save Slot 2</div>
     <div class="save-slot" onclick="selectSaveSlot(3)">Save Slot 3</div>
     <div class="save-slot" onclick="selectSaveSlot(4)">Save Slot 4</div>
     <div class="save-slot" onclick="selectSaveSlot(5)">Save Slot 5</div>
    </div>
    <button class="action-btn" onclick="showScreen('main-menu')">Back</button>
   </div>

   <!-- Character Creation Screen --> 
   <div class="screen character-creation" id="character-creation"> 
    <h2>Create Your Musician Character</h2> 
    <div class="upload-section"> <label for="artist-upload">Profile Picture:</label> 
     <input type="file" id="artist-upload" accept="image/*"> 
     <img src="" alt="Profile Preview" class="preview-img" id="artist-img-preview"> 
    </div> 
    <div class="creation-section"> <label for="artist-name">Artist Name:</label> 
     <input type="text" id="artist-name" placeholder="Enter your artist name"> 
    </div> 
    <div class="creation-section"> <label for="music-genre">Music Genre:</label> <select id="music-genre"> <option value="Pop">Pop</option> <option value="Rock">Rock</option> <option value="Hip-Hop">Hip-Hop</option> <option value="Electronic">Electronic</option> <option value="R&amp;B">R&amp;B</option> <option value="Jazz">Jazz</option> <option value="Country">Country</option> <option value="Classical">Classical</option> <option value="Reggae">Reggae</option> <option value="Metal">Metal</option> <option value="Indie">Indie</option> <option value="Folk">Folk</option> </select> 
    </div> 
    <div class="creation-section"> <label for="gender">Gender:</label> <select id="gender"> <option value="Male">Male</option> <option value="Female">Female</option> <option value="Non-Binary">Non-Binary</option> <option value="Other">Other</option> </select> 
    </div> 
    <div class="creation-section"> <label for="age">Age:</label> 
     <input type="number" id="age" placeholder="Enter your age" min="15" max="99"> 
    </div> 
    <div class="creation-section"> <label for="country">Country:</label> <select id="country"> <option value="United States">United States</option> <option value="United Kingdom">United Kingdom</option> <option value="Canada">Canada</option> <option value="Australia">Australia</option> <option value="Brazil">Brazil</option> <option value="France">France</option> <option value="Germany">Germany</option> <option value="India">India</option> <option value="Japan">Japan</option> <option value="South Africa">South Africa</option> <option value="Nigeria">Nigeria</option> <option value="Mexico">Mexico</option> </select> 
    </div> 
    <div class="creation-section"> <label for="year-started">Year Started:</label> <select id="year-started"> <!-- Options will be populated dynamically --> </select> 
    </div> <button class="action-btn" onclick="saveCharacter()">Create</button> 
   </div> 

   <!-- Social Platforms Screen --> 
   <div class="screen social-platforms" id="social-platforms"> 
    <h2 class="welcome-text">Welcome, <span id="artist-name-display">Artist</span>!</h2> 
    <p class="info-text">Genre: <span id="genre-display">Unknown</span></p> 
    <p class="info-text">Gender: <span id="gender-display">Unknown</span></p> 
    <p class="info-text">Age: <span id="age-display">Unknown</span></p> 
    <p class="info-text">Country: <span id="country-display">Unknown</span></p> 
    <p class="info-text">Year Started: <span id="year-started-display">Unknown</span></p> 
    <div class="platform-circle"> 
     <img src="" alt="Artist Profile" class="artist-profile-img" id="artist-profile-img"> 
    </div> 
    <div class="notification-bar"> 
     <div class="nav-item"> 
      <img src="https://i.ibb.co/9kZfKJDj/images.png" alt="Home" class="nav-icon" onclick="showScreen('home-screen'); updateHomeScreen();"> <span class="nav-label">Home</span> 
     </div> 
     <div class="nav-item"> 
      <img src="https://i.ibb.co/s9Nn2xTv/images-1.png" alt="Distributor" class="nav-icon" , onclick="showScreen('distributor-screen')"> <span class="nav-label">Distributor</span> 
     </div> 
     <div class="nav-item"> 
      <img src="https://i.ibb.co/pvX82tgF/download.png" alt="Social" class="nav-icon" onclick="showScreen('social-screen')"> <span class="nav-label">Social</span> 
     </div> 
     <div class="nav-item"> 
      <img src="https://i.ibb.co/wFnRn5VF/download-1.png" alt="Activity" class="nav-icon" onclick="showScreen('activity-screen')"> <span class="nav-label">Activity</span> 
     </div> 
     <div class="nav-item"> 
      <img src="https://i.ibb.co/7d0mnm9C/download-2.png" alt="Others" class="nav-icon" onclick="alert('Others clicked!')"> <span class="nav-label">Others</span> 
     </div> 
    </div> 
   </div> 

   <!-- Home Screen --> 
   <div class="screen home-screen" id="home-screen"> 
    <div class="stats-bar"> 
     <div class="stat"> 
      <img src="https://i.ibb.co/7J4ms0Ym/1000010812.png" alt="Fame Icon" class="stat-icon"> Fame: <span id="fame-level">0%</span> 
     </div> 
     <div class="stat"> 
      <img src="https://i.ibb.co/DDRmHcg5/1000010813.png" alt="Money Icon" class="stat-icon"> Money: $<span id="money">100</span> 
     </div> 
     <div class="stat"> 
      <img src="https://i.ibb.co/6RGgtWX8/1000010814.png" alt="Energy Icon" class="stat-icon"> Energy: <span id="energy">100</span> 
     </div> 
    </div> 
    <h2 class="welcome-text"><span id="home-artist-name-display">Artist</span></h2> 
    <p class="info-text">Genre: <span id="home-genre-display">Unknown</span></p> 
    <p class="info-text">Gender: <span id="home-gender-display">Unknown</span></p> 
    <p class="info-text">Age: <span id="home-age-display">Unknown</span></p> 
    <p class="info-text">Country: <span id="home-country-display">Unknown</span></p> 
    <p class="info-text">Year Started: <span id="home-year-started-display">Unknown</span></p> 
    <div class="platform-circle"> 
     <img src="" alt="Artist Profile" class="artist-profile-img" id="home-artist-profile-img"> 
    </div> 
    <div class="date-display" id="current-date">
      Year/Date/Month 
    </div> <button class="action-btn" onclick="nextWeek()">Next Week</button> 
    <div class="notification-bar"> 
     <div class="nav-item"> 
      <img src="https://i.ibb.co/9kZfKJDj/images.png" alt="Home" class="nav-icon" onclick="showScreen('home-screen'); updateHomeScreen();"> <span class="nav-label">Home</span> 
     </div> 
     <div class="nav-item"> 
      <img src="https://i.ibb.co/s9Nn2xTv/images-1.png" alt="Distributor" class="nav-icon" onclick="showScreen('distributor-screen')"> <span class="nav-label">Distributor</span> 
     </div> 
     <div class="nav-item"> 
      <img src="https://i.ibb.co/pvX82tgF/download.png" alt="Social" class="nav-icon" onclick="showScreen('social-screen')"> <span class="nav-label">Social</span> 
     </div> 
     <div class="nav-item"> 
      <img src="https://i.ibb.co/wFnRn5VF/download-1.png" alt="Activity" class="nav-icon" onclick="showScreen('activity-screen')"> <span class="nav-label">Activity</span> 
     </div> 
     <div class="nav-item"> 
      <img src="https://i.ibb.co/7d0mnm9C/download-2.png" alt="Others" class="nav-icon" onclick="alert('Others clicked!')"> <span class="nav-label">Others</span> 
     </div> 
    </div> 
   </div> 

   <!-- Social Screen --> 
   <div class="screen social-screen" id="social-screen"> 
    <h2 class="welcome-text">Social Platforms</h2> 
    <div class="platform-grid"> 
     <div class="platform-item" onclick="showScreen('spotify-screen'); updateSpotifyScreen();"> 
      <img src="https://i.ibb.co/rKWPDmH5/IMG-20250322-180853.png" alt="Spotify Logo" class="platform-logo"> <span class="platform-name">Spotify</span> 
     </div> 
     <div class="platform-item"> 
      <img src="https://i.ibb.co/tp6x51tJ/IMG-20250322-181105.png" alt="Apple Music Logo" class="platform-logo"> <span class="platform-name">Apple Music</span> 
     </div> 
     <div class="platform-item"> 
      <img src="https://i.ibb.co/Zz6K76gM/IMG-20250322-181132.png" alt="YouTube Logo" class="platform-logo"> <span class="platform-name">YouTube</span> 
     </div> 
     <div class="platform-item"> 
      <img src="https://i.ibb.co/zVQ1L2tF/IMG-20250322-181701.jpg" alt="TikTok Logo" class="platform-logo"> <span class="platform-name">TikTok</span> 
     </div> 
     <div class="platform-item"> 
      <img src="https://i.ibb.co/R4MC4hGb/IMG-20250322-181639.jpg" alt="Instagram Logo" class="platform-logo"> <span class="platform-name">Instagram</span> 
     </div> 
     <div class="platform-item"> 
      <img src="https://i.ibb.co/bjkbXR4D/IMG-20250322-181619.jpg" alt="X Logo" class="platform-logo"> <span class="platform-name">X</span> 
     </div> 
     <div class="platform-item"> 
      <img src="https://i.ibb.co/kvQtYPw/IMG-20250322-183355.jpg" alt="Ads Logo" class="platform-logo"> <span class="platform-name">Ads</span> 
     </div> 
    </div> 
    <div class="notification-bar"> 
     <div class="nav-item"> 
      <img src="https://i.ibb.co/9kZfKJDj/images.png" alt="Home" class="nav-icon" onclick="showScreen('home-screen'); updateHomeScreen();"> <span class="nav-label">Home</span> 
     </div> 
     <div class="nav-item"> 
      <img src="https://i.ibb.co/s9Nn2xTv/images-1.png" alt="Distributor" class="nav-icon" onclick="showScreen('distributor-screen')"> <span class="nav-label">Distributor</span> 
     </div> 
     <div class="nav-item"> 
      <img src="https://i.ibb.co/pvX82tgF/download.png" alt="Social" class="nav-icon" onclick="showScreen('social-screen')"> <span class="nav-label">Social</span> 
     </div> 
     <div class="nav-item"> 
      <img src="https://i.ibb.co/wFnRn5VF/download-1.png" alt="Activity" class="nav-icon" onclick="showScreen('activity-screen')"> <span class="nav-label">Activity</span> 
     </div> 
     <div class="nav-item"> 
      <img src="https://i.ibb.co/7d0mnm9C/download-2.png" alt="Others" class="nav-icon" onclick="alert('Others clicked!')"> <span class="nav-label">Others</span> 
     </div> 
    </div> 
   </div> 

   <!-- Spotify Screen --> 
   <div class="screen spotify-screen" id="spotify-screen"> 
    <div class="spotify-header"> 
     <img src="https://i.ibb.co/HTMQ32pV/back-arrow-icon.png" alt="Back" class="back-btn" onclick="showScreen('social-screen')"> 
     <img src="" alt="Spotify Artist Profile" class="spotify-profile-img" id="spotify-profile-img"> 
     <p class="spotify-stats" id="spotify-monthly-listeners-header">0 Monthly Listeners</p> 
     <h1 class="spotify-artist-name" id="spotify-artist-name">Artist</h1> 
     <p class="spotify-stats" id="spotify-followers">0 Followers</p> 
    </div> 
    <div class="spotify-content"> 
     <div class="spotify-section"> 
      <h2>Popular</h2> 
      <div id="popular-releases">
        <p class="empty-text">No popular releases yet.</p>
      </div> 
      <button class="see-more-btn" id="see-more-popular" style="display: none;">See more</button>
     </div> 
     <div class="spotify-section"> 
      <h2>Latest Releases</h2> 
      <div id="latest-releases">
        <p class="empty-text">No latest releases yet.</p>
      </div> 
     </div> 
     <div class="spotify-section"> 
      <h2>Popular Songs</h2> 
      <div class="distributor-header">
       <img src="https://i.ibb.co/HTMQ32pV/back-arrow-icon.png" alt="Back" class="back-btn" onclick="showScreen('spotify-screen'); updateSpotifyScreen();">
      </div>
      <div id="popular-songs">
        <p class="empty-text">No popular songs yet.</p>
      </div> 
      <button class="see-more-btn" id="see-more-songs" style="display: none;">See more</button>
     </div> 
     <div class="spotify-section"> 
      <h2>Albums</h2> 
      <div id="albums">
        <p class="empty-text">No albums yet.</p>
      </div> 
     </div> 
     <div class="spotify-section"> 
      <h2>EPs</h2> 
      <div id="eps">
        <p class="empty-text">EP features coming soon.</p>
      </div> 
     </div> 
     <div class="spotify-section"> 
      <h2>About Artist</h2> 
      <div class="about-artist-content"> 
       <img src="" alt="Spotify Artist Profile" class="about-artist-img" id="about-artist-img"> 
       <p class="spotify-stats" id="spotify-monthly-listeners">0 Monthly Listeners</p> 
       <p id="spotify-bio">An musician</p> 
      </div> 
     </div> 
    </div> 
    <div class="spotify-nav-bar"> 
     <div class="nav-item"> 
      <img src="https://i.ibb.co/qMSgbckX/download.jpg" alt="Home" class="nav-icon" onclick="showScreen('home-screen'); updateHomeScreen();"> <span class="nav-label">Home</span> 
     </div> 
     <div class="nav-item"> 
      <img src="https://i.ibb.co/F2pyrFC/1000011137.png" alt="Chart" class="nav-icon" onclick="alert('Chart features coming soon')"> <span class="nav-label">Chart</span> 
     </div> 
    </div> 
   </div> 
   
   <!-- Distributor Screen -->
   <div class="screen distributor-screen" id="distributor-screen">
    <div class="distributor-header">
     <img src="https://i.ibb.co/HTMQ32pV/back-arrow-icon.png" alt="Back" class="back-btn" onclick="showScreen('social-platforms')">
     <h2>Select Your Distributor</h2>
    </div>
    <div class="distributor-grid">
        <div class="distributor-item" onclick="selectDistributor('onerpm')">
            <img src="https://i.ibb.co/yc9WW28q/file-TE71-XLn-XBA8yk-Dw-XVDm-QZH.webp" alt="OneRPM Logo" class="distributor-logo">
            <span class="distributor-name">OneRPM</span>
            <p>30% Royalties / Free</p>
        </div>
        <div class="distributor-item" onclick="selectDistributor('tunecore')">
            <img src="https://i.ibb.co/4Rxr1W7j/file-6n5o-Qx-N4ayo-Gx-CGGFYm-PFv.webp" alt="TuneCore Logo" class="distributor-logo">
            <span class="distributor-name">TuneCore</span>
            <p>50% Royalties / $10 Yearly</p>
        </div>
        <div class="distributor-item" onclick="selectDistributor('cdbaby')">
            <img src="https://i.ibb.co/5XymphF2/file-4u-A2en4-Um-Byfw-DX2-Ry4-Msd.webp" alt="CD Baby Logo" class="distributor-logo">
            <span class="distributor-name">CD Baby</span>
            <p>70% Royalties / $35 Yearly</p>
        </div>
        <div class="distributor-item" onclick="selectDistributor('distrokid')">
            <img src="https://i.ibb.co/Wp4W1q7b/file-4-JFa-MLUDKz-KGZ6-WDRTEj-Yd.webp" alt="DistroKid Logo" class="distributor-logo">
            <span class="distributor-name">DistroKid</span>
            <p>80% Royalties / $50 Yearly</p>
        </div>
        <div class="distributor-item" onclick="selectDistributor('dittomusic')">
            <img src="https://i.ibb.co/BKT5gnPP/file-1kxr3-Ny5-Fi86-Mr1-Vv-ZZMn-X.webp" alt="Ditto Music Logo" class="distributor-logo">
            <span class="distributor-name">Ditto Music</span>
            <p>100% Royalties / $100 Yearly</p>
        </div>
    </div>
    
    <!-- Distributor Options Screen -->
    <div class="distributor-options" id="distributor-options" style="display: none;">
     <div class="distributor-header">
      <img src="https://i.ibb.co/HTMQ32pV/back-arrow-icon.png" alt="Back" class="back-btn" onclick="backToDistributorGrid()">
      <h2 id="selected-distributor-name"></h2>
     </div>
     <div class="action-grid">
      <button class="action-btn" onclick="showCreateSong()">Create Song (-10 Energy)</button>
      <button class="action-btn" onclick="showCreateAlbum()">Create Album (-50 Energy)</button>
      <button class="action-btn" disabled>Music Video (Coming Soon)</button>
      <button class="action-btn" onclick="showUnreleased()">Unreleased</button>
      <button class="action-btn" onclick="showReleased()">Released</button>
      <button class="action-btn" disabled>Remix Song (Coming Soon)</button>
      <button class="action-btn" disabled>Add Feature (Coming Soon)</button>
     </div>
     <div class="notification-bar">
      <div class="nav-item">
       <img src="https://i.ibb.co/9kZfKJDj/images.png" alt="Home" class="nav-icon" onclick="showScreen('home-screen'); updateHomeScreen();">
       <span class="nav-label">Home</span>
      </div>
      <div class="nav-item">
       <img src="https://i.ibb.co/s9Nn2xTv/images-1.png" alt="Distributor" class="nav-icon" onclick="showScreen('distributor-screen')">
       <span class="nav-label">Distributor</span>
      </div>
      <div class="nav-item">
       <img src="https://i.ibb.co/pvX82tgF/download.png" alt="Social" class="nav-icon" onclick="showScreen('social-screen')">
       <span class="nav-label">Social</span>
      </div>
      <div class="nav-item">
       <img src="https://i.ibb.co/wFnRn5VF/download-1.png" alt="Activity" class="nav-icon" onclick="showScreen('activity-screen')">
       <span class="nav-label">Activity</span>
      </div>
      <div class="nav-item">
       <img src="https://i.ibb.co/7d0mnm9C/download-2.png" alt="Others" class="nav-icon" onclick="alert('Others clicked!')">
       <span class="nav-label">Others</span>
      </div>
     </div>
    </div>

    <!-- Create Song Screen -->
    <div class="create-song" id="create-song" style="display: none;">
     <div class="distributor-header">
      <img src="https://i.ibb.co/HTMQ32pV/back-arrow-icon.png" alt="Back" class="back-btn" onclick="cancelCreateSong()">
      <h2>Create Song</h2>
     </div>
     <div class="creation-section">
      <label for="song-title">Song Title:</label>
      <input type="text" id="song-title" placeholder="Enter song title">
     </div>
     <div class="creation-section">
      <label for="song-photo">Add Photo:</label>
      <input type="file" id="song-photo" accept="image/*" onchange="previewSongImage()">
      <img src="" alt="Song Preview" class="preview-img" id="song-img-preview">
     </div>
     <div class="creation-section">
      <label for="song-genre">Select Genre:</label>
      <select id="song-genre">
       <option value="Pop">Pop</option>
       <option value="Rock">Rock</option>
       <option value="Hip-Hop">Hip-Hop</option>
       <option value="Electronic">Electronic</option>
       <option value="R&amp;B">R&amp;B</option>
       <option value="Jazz">Jazz</option>
       <option value="Country">Country</option>
       <option value="Classical">Classical</option>
       <option value="Reggae">Reggae</option>
       <option value="Metal">Metal</option>
       <option value="Indie">Indie</option>
       <option value="Folk">Folk</option>
      </select>
     </div>
     <div class="creation-section">
      <label for="studio-budget">Select Studio Budget:</label>
      <select id="studio-budget">
       <option value="">Select a studio</option>
       <option value="small-pro">Small Pro - $500</option>
       <option value="city-dj">City DJ - $1,000</option>
       <option value="high-man">High Man - $10,000</option>
       <option value="sign-cleb">Sign Cleb - $100,000</option>
       <option value="mlj-pro">MLJ Pro - $1,000,000</option>
      </select>
     </div>
     <button class="action-btn" onclick="cancelCreateSong()">Cancel</button>
     <button class="action-btn" onclick="confirmCreateSong()">Confirm</button>
    </div>

    <!-- Create Album Screen -->
    <div class="create-album" id="create-album" style="display: none;">
     <div class="distributor-header">
      <img src="https://i.ibb.co/HTMQ32pV/back-arrow-icon.png" alt="Back" class="back-btn" onclick="cancelCreateAlbum()">
      <h2>Create Album</h2>
     </div>
     <div class="creation-section">
      <label for="album-title">Album Title:</label>
      <input type="text" id="album-title" placeholder="Enter album title">
     </div>
     <div class="creation-section">
      <label for="album-photo">Add Photo:</label>
      <input type="file" id="album-photo" accept="image/*" onchange="previewAlbumImage()">
      <img src="" alt="Album Preview" class="preview-img" id="album-img-preview">
     </div>
     <div class="creation-section">
      <button class="action-btn" onclick="showSongSelection()">Select Songs (At least 8)</button>
      <div id="selected-songs-list"></div>
     </div>
     <button class="action-btn" onclick="cancelCreateAlbum()">Cancel</button>
     <button class="action-btn" onclick="confirmSongSelection()">Confirm Selection</button>
    </div>

    <!-- Song Selection Screen -->
    <div class="song-selection" id="song-selection" style="display: none;">
     <div class="distributor-header">
      <img src="https://i.ibb.co/HTMQ32pV/back-arrow-icon.png" alt="Back" class="back-btn" onclick="backToCreateAlbum()">
      <h2>Select Songs for Album</h2>
     </div>
     <div id="unreleased-songs-list"></div>
    </div>

    <!-- Album Genre Selection -->
    <div class="album-genre-selection" id="album-genre-selection" style="display: none;">
     <div class="distributor-header">
      <img src="https://i.ibb.co/HTMQ32pV/back-arrow-icon.png" alt="Back" class="back-btn" onclick="cancelAlbumGenre()">
      <h2>Select Album Genre</h2>
     </div>
     <div class="creation-section">
      <label for="album-genre">Select Genre:</label>
      <select id="album-genre">
       <option value="Pop">Pop</option>
       <option value="Rock">Rock</option>
       <option value="Hip-Hop">Hip-Hop</option>
       <option value="Electronic">Electronic</option>
       <option value="R&amp;B">R&amp;B</option>
       <option value="Jazz">Jazz</option>
       <option value="Country">Country</option>
       <option value="Classical">Classical</option>
       <option value="Reggae">Reggae</option>
       <option value="Metal">Metal</option>
       <option value="Indie">Indie</option>
       <option value="Folk">Folk</option>
      </select>
     </div>
     <button class="action-btn" onclick="cancelAlbumGenre()">Cancel</button>
     <button class="action-btn" onclick="confirmCreateAlbum()">Confirm</button>
    </div>

    <!-- Unreleased Screen -->
    <div class="unreleased-screen" id="unreleased-screen" style="display: none;">
     <div class="distributor-header">
      <img src="https://i.ibb.co/HTMQ32pV/back-arrow-icon.png" alt="Back" class="back-btn" onclick="backToDistributorOptions()">
      <h2>Unreleased Content</h2>
     </div>
     <div id="unreleased-list"></div>
    </div>

    <!-- Released Screen -->
    <div class="unreleased-screen" id="released-screen" style="display: none;">
     <div class="distributor-header">
      <img src="https://i.ibb.co/HTMQ32pV/back-arrow-icon.png" alt="Back" class="back-btn" onclick="backToDistributorOptions()">
      <h2>Released Content</h2>
     </div>
     <div id="released-list"></div>
    </div>

    <div class="notification-bar">
     <div class="nav-item">
      <img src="https://i.ibb.co/9kZfKJDj/images.png" alt="Home" class="nav-icon" onclick="showScreen('home-screen'); updateHomeScreen();">
      <span class="nav-label">Home</span>
     </div>
     <div class="nav-item">
      <img src="https://i.ibb.co/s9Nn2xTv/images-1.png" alt="Distributor" class="nav-icon" onclick="showScreen('distributor-screen')">
      <span class="nav-label">Distributor</span>
     </div>
     <div class="nav-item">
      <img src="https://i.ibb.co/pvX82tgF/download.png" alt="Social" class="nav-icon" onclick="showScreen('social-screen')">
      <span class="nav-label">Social</span>
     </div>
     <div class="nav-item">
      <img src="https://i.ibb.co/wFnRn5VF/download-1.png" alt="Activity" class="nav-icon" onclick="showScreen('activity-screen')">
      <span class="nav-label">Activity</span>
     </div>
     <div class="nav-item">
      <img src="https://i.ibb.co/7d0mnm9C/download-2.png" alt="Others" class="nav-icon" onclick="alert('Others clicked!')">
      <span class="nav-label">Others</span>
     </div>
    </div>
   </div>

   <!-- Activity Screen -->
   <div class="screen activity-screen" id="activity-screen">
    <div class="distributor-header">
     <img src="https://i.ibb.co/HTMQ32pV/back-arrow-icon.png" alt="Back" class="back-btn" onclick="showScreen('social-platforms')">
     <h2>Activity</h2>
    </div>
    <div class="activity-section">
     <h2>Jobs</h2>
     <div id="current-job" style="display: none;">
      <p>Current Job: <span id="current-job-name">None</span></p>
      <button class="action-btn" onclick="quitJob()">Quit Job</button>
     </div>
     <div id="job-list">
      <div class="job-item" onclick="applyForJob('Car Wash Attendant', 300)">
       <span class="job-name">Car Wash Attendant</span>
       <p>$300 per week</p>
      </div>
      <div class="job-item" onclick="applyForJob('Babysitter', 400)">
       <span class="job-name">Babysitter</span>
       <p>$400 per week</p>
      </div>
      <div class="job-item" onclick="applyForJob('Lawn Care Worker', 350)">
       <span class="job-name">Lawn Care Worker</span>
       <p>$350 per week</p>
      </div>
      <div class="job-item" onclick="applyForJob('Housekeeper', 400)">
       <span class="job-name">Housekeeper</span>
       <p>$400 per week</p>
      </div>
      <div class="job-item" onclick="applyForJob('Pet Sitter', 300)">
       <span class="job-name">Pet Sitter</span>
       <p>$300 per week</p>
      </div>
      <div class="job-item" onclick="applyForJob('Tutor', 400)">
       <span class="job-name">Tutor</span>
       <p>$400 per week</p>
      </div>
      <div class="job-item" onclick="applyForJob('Food Delivery Driver', 500)">
       <span class="job-name">Food Delivery Driver</span>
       <p>$500 per week</p>
      </div>
      <div class="job-item" onclick="applyForJob('Retail Sales Associate', 400)">
       <span class="job-name">Retail Sales Associate</span>
       <p>$400 per week</p>
      </div>
      <div class="job-item" onclick="applyForJob('Cleaning Service Worker', 600)">
       <span class="job-name">Cleaning Service Worker</span>
       <p>$600 per week</p>
      </div>
      <div class="job-item" onclick="applyForJob('Handyman', 500)">
       <span class="job-name">Handyman</span>
       <p>$500 per week</p>
      </div>
     </div>
    </div>
    <div class="activity-section">
     <h2>Events</h2>
     <div id="event-list">
      <!-- Events will be populated dynamically -->
     </div>
    </div>
    <div class="notification-bar">
     <div class="nav-item">
      <img src="https://i.ibb.co/9kZfKJDj/images.png" alt="Home" class="nav-icon" onclick="showScreen('home-screen'); updateHomeScreen();">
      <span class="nav-label">Home</span>
     </div>
     <div class="nav-item">
      <img src="https://i.ibb.co/s9Nn2xTv/images-1.png" alt="Distributor" class="nav-icon" onclick="showScreen('distributor-screen')">
      <span class="nav-label">Distributor</span>
     </div>
     <div class="nav-item">
      <img src="https://i.ibb.co/pvX82tgF/download.png" alt="Social" class="nav-icon" onclick="showScreen('social-screen')">
      <span class="nav-label">Social</span>
     </div>
     <div class="nav-item">
      <img src="https://i.ibb.co/wFnRn5VF/download-1.png" alt="Activity" class="nav-icon" onclick="showScreen('activity-screen')">
      <span class="nav-label">Activity</span>
     </div>
     <div class="nav-item">
      <img src="https://i.ibb.co/7d0mnm9C/download-2.png" alt="Others" class="nav-icon" onclick="alert('Others clicked!')">
      <span class="nav-label">Others</span>
     </div>
    </div>
   </div>
  </div> 
  <script src="script.js"></script> 
 
<script type="text/javascript" id="dcoder_script">// Game data for each save slot
let saveSlots = {
    1: null,
    2: null,
    3: null,
    4: null,
    5: null
};

let currentSlot = null;

let gameData = {
    artistName: '',
    genre: '',
    gender: '',
    age: '',
    startingAge: '',
    country: '',
    yearStarted: '',
    artistImage: '',
    fameLevel: 0,
    money: 100,
    energy: 100,
    currentDate: null,
    monthlyListeners: 0,
    followers: 0,
    selectedDistributor: null,
    unreleasedSongs: [],
    releasedSongs: [],
    unreleasedAlbums: [],
    releasedAlbums: [],
    currentJob: null,
    weeklyEvents: [],
    eventsParticipated: 0,
    lastReleaseWeek: null,
    lastEventWeek: null
};

// List of 50 events
const eventsList = [
    { name: "TikTok", energyCost: 10, moneyCost: 0, fameIncrease: 0.5 },
    { name: "TV Pro", energyCost: 0, moneyCost: 100, fameIncrease: 0.6 },
    { name: "Instagram Post", energyCost: 5, moneyCost: 0, fameIncrease: 0.3 },
    { name: "Podcast Guest", energyCost: 0, moneyCost: 50, fameIncrease: 0.4 },
    { name: "YouTube Video", energyCost: 20, moneyCost: 0, fameIncrease: 1.0 },
    { name: "Radio Interview", energyCost: 0, moneyCost: 20, fameIncrease: 0.2 },
    { name: "Fashion Show", energyCost: 15, moneyCost: 0, fameIncrease: 0.8 },
    { name: "Charity Event", energyCost: 0, moneyCost: 150, fameIncrease: 1.2 },
    { name: "Book Signing", energyCost: 0, moneyCost: 30, fameIncrease: 0.5 },
    { name: "Concert Performance", energyCost: 25, moneyCost: 0, fameIncrease: 1.5 },
    { name: "TV Commercial", energyCost: 0, moneyCost: 200, fameIncrease: 1.0 },
    { name: "Sports Event", energyCost: 12, moneyCost: 0, fameIncrease: 0.6 },
    { name: "Art Exhibition", energyCost: 0, moneyCost: 100, fameIncrease: 0.8 },
    { name: "Talk Show", energyCost: 0, moneyCost: 80, fameIncrease: 0.7 },
    { name: "Music Festival", energyCost: 20, moneyCost: 0, fameIncrease: 1.2 },
    { name: "Awards Ceremony", energyCost: 0, moneyCost: 250, fameIncrease: 1.5 },
    { name: "Fashion Magazine", energyCost: 0, moneyCost: 50, fameIncrease: 0.4 },
    { name: "Celebrity Interview", energyCost: 0, moneyCost: 150, fameIncrease: 1.0 },
    { name: "Red Carpet Event", energyCost: 0, moneyCost: 300, fameIncrease: 2.0 },
    { name: "Product Endorsement", energyCost: 0, moneyCost: 200, fameIncrease: 1.2 },
    { name: "Social Media Challenge", energyCost: 8, moneyCost: 0, fameIncrease: 0.4 },
    { name: "Gaming Tournament", energyCost: 15, moneyCost: 0, fameIncrease: 0.8 },
    { name: "Reality TV Show", energyCost: 0, moneyCost: 100, fameIncrease: 0.8 },
    { name: "Music Video", energyCost: 18, moneyCost: 0, fameIncrease: 1.0 },
    { name: "Fashion Brand Ambassador", energyCost: 0, moneyCost: 250, fameIncrease: 1.5 },
    { name: "Philanthropic Donation", energyCost: 0, moneyCost: 500, fameIncrease: 2.5 },
    { name: "Exclusive Interview", energyCost: 0, moneyCost: 200, fameIncrease: 1.2 },
    { name: "VIP Party", energyCost: 0, moneyCost: 300, fameIncrease: 2.0 },
    { name: "Fashion Photoshoot", energyCost: 0, moneyCost: 150, fameIncrease: 0.9 },
    { name: "TV Show Appearance", energyCost: 0, moneyCost: 100, fameIncrease: 0.7 },
    { name: "Radio Show Host", energyCost: 0, moneyCost: 50, fameIncrease: 0.4 },
    { name: "Podcast Host", energyCost: 0, moneyCost: 20, fameIncrease: 0.2 },
    { name: "YouTube Live Stream", energyCost: 12, moneyCost: 0, fameIncrease: 0.6 },
    { name: "Gaming Live Stream", energyCost: 10, moneyCost: 0, fameIncrease: 0.5 },
    { name: "Social Media Contest", energyCost: 5, moneyCost: 0, fameIncrease: 0.3 },
    { name: "Fashion Contest", energyCost: 0, moneyCost: 20, fameIncrease: 0.2 },
    { name: "Talent Show", energyCost: 0, moneyCost: 50, fameIncrease: 0.4 },
    { name: "Music Competition", energyCost: 0, moneyCost: 100, fameIncrease: 0.7 },
    { name: "Dance Competition", energyCost: 0, moneyCost: 80, fameIncrease: 0.6 },
    { name: "Acting Audition", energyCost: 0, moneyCost: 30, fameIncrease: 0.3 },
    { name: "Modeling Audition", energyCost: 0, moneyCost: 20, fameIncrease: 0.2 },
    { name: "Singing Audition", energyCost: 0, moneyCost: 50, fameIncrease: 0.4 },
    { name: "TV Show Audition", energyCost: 0, moneyCost: 100, fameIncrease: 0.7 },
    { name: "Movie Audition", energyCost: 0, moneyCost: 200, fameIncrease: 1.0 },
    { name: "Fashion Show Audition", energyCost: 0, moneyCost: 150, fameIncrease: 0.9 },
    { name: "Commercial Audition", energyCost: 0, moneyCost: 50, fameIncrease: 0.4 },
    { name: "Theater Audition", energyCost: 0, moneyCost: 30, fameIncrease: 0.3 },
    { name: "Music Festival Audition", energyCost: 0, moneyCost: 100, fameIncrease: 0.7 },
    { name: "Gaming Tournament Audition", energyCost: 0, moneyCost: 50, fameIncrease: 0.4 },
    { name: "Reality TV Show Audition", energyCost: 0, moneyCost: 200, fameIncrease: 1.0 }
];

// Studio budget options
const studioBudgets = {
    'small-pro': 500,
    'city-dj': 1000,
    'high-man': 10000,
    'sign-cleb': 100000,
    'mlj-pro': 1000000
};

// Show main menu on first load
showScreen('main-menu');
loadSaveSlots();

// Load save slots from localStorage
function loadSaveSlots() {
    for (let i = 1; i <= 5; i++) {
        const savedData = localStorage.getItem(`musicianGameData_slot${i}`);
        if (savedData) {
            saveSlots[i] = JSON.parse(savedData);
            const slotElement = document.querySelector(`.save-slot:nth-child(${i})`);
            slotElement.textContent = saveSlots[i].artistName || `Save Slot ${i}`;
        }
    }
}

// Select a save slot
function selectSaveSlot(slot) {
    currentSlot = slot;
    const savedData = saveSlots[slot];
    if (savedData) {
        gameData = {
            ...savedData,
            currentDate: new Date(savedData.currentDate)
        };
        showScreen('social-platforms');
        updateSocialPlatforms();
    } else {
        gameData = {
            artistName: '',
            genre: '',
            gender: '',
            age: '',
            startingAge: '',
            country: '',
            yearStarted: '',
            artistImage: '',
            fameLevel: 0,
            money: 100,
            energy: 100,
            currentDate: null,
            monthlyListeners: 0,
            followers: 0,
            selectedDistributor: null,
            unreleasedSongs: [],
            releasedSongs: [],
            unreleasedAlbums: [],
            releasedAlbums: [],
            currentJob: null,
            weeklyEvents: [],
            eventsParticipated: 0,
            lastReleaseWeek: null,
            lastEventWeek: null
        };
        showScreen('character-creation');
    }
}

// Populate Year Started dropdown (1999 to 2025)
const yearStartedSelect = document.getElementById('year-started');
for (let year = 1999; year <= 2025; year++) {
    const option = document.createElement('option');
    option.value = year;
    option.textContent = year;
    yearStartedSelect.appendChild(option);
}

// Preview profile picture
document.getElementById('artist-upload').addEventListener('change', function(event) {
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById('artist-img-preview').src = e.target.result;
        };
        reader.readAsDataURL(file);
    }
});

// Preview song image
function previewSongImage() {
    const file = document.getElementById('song-photo').files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById('song-img-preview').src = e.target.result;
        };
        reader.readAsDataURL(file);
    }
}

// Preview album image
function previewAlbumImage() {
    const file = document.getElementById('album-photo').files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById('album-img-preview').src = e.target.result;
        };
        reader.readAsDataURL(file);
    }
}

// Save character data
function saveCharacter() {
    const artistName = document.getElementById('artist-name').value.trim();
    const genre = document.getElementById('music-genre').value;
    const gender = document.getElementById('gender').value;
    const age = parseInt(document.getElementById('age').value);
    const country = document.getElementById('country').value;
    const yearStarted = parseInt(document.getElementById('year-started').value);
    const artistUpload = document.getElementById('artist-upload');

    if (!artistName) {
        alert('Please enter an artist name!');
        return;
    }

    if (!age || age < 15 || age > 99) {
        alert('Please enter a valid age between 15 and 99!');
        return;
    }

    const currentYear = 2025;
    const birthYear = currentYear - age;
    if (yearStarted < 1999 || yearStarted > currentYear) {
        alert('Year Started must be between 1999 and 2025!');
        return;
    }
    if (yearStarted < birthYear) {
        alert(`Year Started (${yearStarted}) cannot be before the artist was born (${birthYear})!`);
        return;
    }
    if (yearStarted > birthYear + age) {
        alert(`Year Started (${yearStarted}) cannot be in the future relative to the artist's age!`);
        return;
    }

    gameData.artistName = artistName;
    gameData.genre = genre;
    gameData.gender = gender;
    gameData.age = age;
    gameData.startingAge = age;
    gameData.country = country;
    gameData.yearStarted = yearStarted;
    gameData.currentDate = new Date(yearStarted, 0, 1);

    if (artistUpload.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
            gameData.artistImage = e.target.result;
            saveGame();
            saveSlots[currentSlot] = { ...gameData };
            const slotElement = document.querySelector(`.save-slot:nth-child(${currentSlot})`);
            slotElement.textContent = gameData.artistName;
            showScreen('social-platforms');
            updateSocialPlatforms();
        };
        reader.readAsDataURL(artistUpload.files[0]);
    } else {
        saveGame();
        saveSlots[currentSlot] = { ...gameData };
        const slotElement = document.querySelector(`.save-slot:nth-child(${currentSlot})`);
        slotElement.textContent = gameData.artistName;
        showScreen('social-platforms');
        updateSocialPlatforms();
    }
}

// Update the character's age based on the current in-game year
function updateAge() {
    if (!gameData.currentDate || !gameData.yearStarted || !gameData.startingAge) return;
    const currentYear = gameData.currentDate.getFullYear();
    const yearsPassed = currentYear - gameData.yearStarted;
    gameData.age = gameData.startingAge + yearsPassed;
}

// Update the social platforms screen
function updateSocialPlatforms() {
    updateAge();
    document.getElementById('artist-name-display').textContent = gameData.artistName || 'Artist';
    document.getElementById('genre-display').textContent = gameData.genre || 'Unknown';
    document.getElementById('gender-display').textContent = gameData.gender || 'Unknown';
    document.getElementById('age-display').textContent = gameData.age || 'Unknown';
    document.getElementById('country-display').textContent = gameData.country || 'Unknown';
    document.getElementById('year-started-display').textContent = gameData.yearStarted || 'Unknown';
    const profileImg = document.getElementById('artist-profile-img');
    if (gameData.artistImage) {
        profileImg.src = gameData.artistImage;
    } else {
        profileImg.src = '';
    }
    saveGame();
}

// Update the home screen
function updateHomeScreen() {
    updateAge();
    document.getElementById('fame-level').textContent = gameData.fameLevel.toFixed(1) + '%';
    document.getElementById('money').textContent = gameData.money;
    document.getElementById('energy').textContent = gameData.energy;
    document.getElementById('home-artist-name-display').textContent = gameData.artistName || 'Artist';
    document.getElementById('home-genre-display').textContent = gameData.genre || 'Unknown';
    document.getElementById('home-gender-display').textContent = gameData.gender || 'Unknown';
    document.getElementById('home-age-display').textContent = gameData.age || 'Unknown';
    document.getElementById('home-country-display').textContent = gameData.country || 'Unknown';
    document.getElementById('home-year-started-display').textContent = gameData.yearStarted || 'Unknown';
    const homeProfileImg = document.getElementById('home-artist-profile-img');
    if (gameData.artistImage) {
        homeProfileImg.src = gameData.artistImage;
    } else {
        homeProfileImg.src = '';
    }

    if (!(gameData.currentDate instanceof Date) || isNaN(gameData.currentDate)) {
        gameData.currentDate = new Date(gameData.yearStarted, 0, 1);
    }

    const year = gameData.currentDate.getFullYear();
    const month = String(gameData.currentDate.getMonth() + 1).padStart(2, '0');
    const day = String(gameData.currentDate.getDate()).padStart(2, '0');
    document.getElementById('current-date').textContent = `${year}/${day}/${month}`;
    saveGame();
}

// State to track "See More" toggles
let isPopularExpanded = false;
let isSongsExpanded = false;

// Update the Spotify screen
function updateSpotifyScreen() {
    document.getElementById('spotify-artist-name').textContent = gameData.artistName || 'Artist';
    const spotifyProfileImg = document.getElementById('spotify-profile-img');
    if (gameData.artistImage) {
        spotifyProfileImg.src = gameData.artistImage;
    } else {
        spotifyProfileImg.src = '';
    }

    const aboutArtistImg = document.getElementById('about-artist-img');
    if (gameData.artistImage) {
        aboutArtistImg.src = gameData.artistImage;
    } else {
        aboutArtistImg.src = '';
    }

    document.getElementById('spotify-monthly-listeners-header').textContent = `${gameData.monthlyListeners.toLocaleString()} Monthly Listeners`;
    document.getElementById('spotify-monthly-listeners').textContent = `${gameData.monthlyListeners.toLocaleString()} Monthly Listeners`;
    document.getElementById('spotify-followers').textContent = `${gameData.followers.toLocaleString()} Followers`;

    const popularReleases = document.getElementById('popular-releases');
    const latestReleases = document.getElementById('latest-releases');
    const popularSongs = document.getElementById('popular-songs');
    const albumsSection = document.getElementById('albums');
    const seeMorePopularButton = document.getElementById('see-more-popular');
    const seeMoreSongsButton = document.getElementById('see-more-songs');

    let allSongs = [];
    gameData.releasedSongs.forEach(song => {
        allSongs.push({ ...song, albumTitle: null, albumPhoto: null, isFromAlbum: false });
    });

    gameData.releasedAlbums.forEach(album => {
        album.songs.forEach(song => {
            allSongs.push({
                title: song.title,
                photo: song.photo,
                streams: song.streams || 0,
                albumTitle: album.title,
                albumPhoto: album.photo,
                isFromAlbum: true
            });
        });
    });

    // Popular Section (Top 5 trending songs by streams with ranking)
    if (allSongs.length > 0) {
        allSongs.sort((a, b) => (b.streams || 0) - (a.streams || 0));
        popularReleases.innerHTML = '';
        const songsToShow = isPopularExpanded ? allSongs : allSongs.slice(0, 5);
        songsToShow.forEach((song, index) => {
            const songItem = document.createElement('div');
            songItem.className = 'release-item';
            const coverSrc = song.isFromAlbum ? song.albumPhoto : song.photo || '';
            const formattedStreams = song.streams.toLocaleString();
            songItem.innerHTML = `
                <span class="release-rank">${index + 1}</span>
                <img src="${coverSrc}" alt="${song.title} Cover" class="release-cover">
                <div class="release-info">
                    <p class="release-title">${song.title}${song.albumTitle ? ` (from ${song.albumTitle})` : ''}</p>
                    <p class="release-streams">${formattedStreams}</p>
                </div>
            `;
            popularReleases.appendChild(songItem);
        });
        if (allSongs.length > 5) {
            seeMorePopularButton.style.display = 'block';
            seeMorePopularButton.textContent = isPopularExpanded ? 'See less' : 'See more';
        } else {
            seeMorePopularButton.style.display = 'none';
        }
    } else {
        popularReleases.innerHTML = '<p class="empty-text">No popular releases yet.</p>';
        seeMorePopularButton.style.display = 'none';
    }

    seeMorePopularButton.onclick = () => {
        isPopularExpanded = !isPopularExpanded;
        updateSpotifyScreen();
    };

    // Latest Releases
    if (gameData.releasedAlbums.length > 0 || gameData.releasedSongs.length > 0) {
        latestReleases.innerHTML = '';
        if (gameData.releasedAlbums.length > 0) {
            const latestAlbum = gameData.releasedAlbums[gameData.releasedAlbums.length - 1];
            const albumItem = document.createElement('div');
            albumItem.className = 'release-item';
            albumItem.innerHTML = `
                <img src="${latestAlbum.photo || ''}" alt="${latestAlbum.title} Cover" class="release-cover">
                <div>
                    <p>${latestAlbum.title} (Album) - Streams: ${latestAlbum.streams.toLocaleString()}</p>
                    <ul>
                        ${latestAlbum.songs.map(song => `<li>${song.title || 'Unknown Song'} - Streams: ${song.streams.toLocaleString()}</li>`).join('')}
                    </ul>
                </div>
            `;
            latestReleases.appendChild(albumItem);
        }
        if (gameData.releasedSongs.length > 0) {
            const latestSong = gameData.releasedSongs[gameData.releasedSongs.length - 1];
            const songItem = document.createElement('div');
            songItem.className = 'release-item';
            songItem.innerHTML = `
                <img src="${latestSong.photo || ''}" alt="${latestSong.title} Cover" class="release-cover">
                <p>${latestSong.title} (Song) - Streams: ${latestSong.streams.toLocaleString()}</p>
            `;
            latestReleases.appendChild(songItem);
        }
    } else {
        latestReleases.innerHTML = '<p class="empty-text">No latest releases yet.</p>';
    }

    // Popular Songs (Top 5 songs by streams with "See More" button)
    if (allSongs.length > 0) {
        allSongs.sort((a, b) => (b.streams || 0) - (a.streams || 0));
        popularSongs.innerHTML = '';
        const songsToShow = isSongsExpanded ? allSongs : allSongs.slice(0, 5);
        songsToShow.forEach(song => {
            const songItem = document.createElement('div');
            songItem.className = 'release-item';
            const coverSrc = song.isFromAlbum ? song.albumPhoto : song.photo || '';
            songItem.innerHTML = `
                <img src="${coverSrc}" alt="${song.title} Cover" class="release-cover">
                <p>${song.title}${song.albumTitle ? ` (from ${song.albumTitle})` : ''} - Streams: ${song.streams.toLocaleString()}</p>
            `;
            popularSongs.appendChild(songItem);
        });
        if (allSongs.length > 5) {
            seeMoreSongsButton.style.display = 'block';
            seeMoreSongsButton.textContent = isSongsExpanded ? 'See less' : 'See more';
        } else {
            seeMoreSongsButton.style.display = 'none';
        }
    } else {
        popularSongs.innerHTML = '<p class="empty-text">No popular songs yet.</p>';
        seeMoreSongsButton.style.display = 'none';
    }

    seeMoreSongsButton.onclick = () => {
        isSongsExpanded = !isSongsExpanded;
        updateSpotifyScreen();
    };

    // Albums Section
    if (gameData.releasedAlbums.length > 0) {
        albumsSection.innerHTML = '';
        gameData.releasedAlbums.forEach(album => {
            const albumItem = document.createElement('div');
            albumItem.className = 'release-item';
            albumItem.innerHTML = `
                <img src="${album.photo || ''}" alt="${album.title} Cover" class="release-cover">
                <p>${album.title} - Streams: ${album.streams.toLocaleString()}</p>
            `;
            albumsSection.appendChild(albumItem);
        });
    } else {
        albumsSection.innerHTML = '<p class="empty-text">No albums yet.</p>';
    }
    saveGame();
}

// Function to select 3 random events for the week
function selectWeeklyEvents() {
    gameData.weeklyEvents = [];
    const shuffledEvents = eventsList.sort(() => 0.5 - Math.random());
    gameData.weeklyEvents = shuffledEvents.slice(0, 3);
}

// Update the Activity screen
function updateActivityScreen() {
    const currentJobDiv = document.getElementById('current-job');
    const currentJobName = document.getElementById('current-job-name');
    const eventList = document.getElementById('event-list');

    // Update current job
    if (gameData.currentJob) {
        currentJobDiv.style.display = 'block';
        currentJobName.textContent = gameData.currentJob.name;
    } else {
        currentJobDiv.style.display = 'none';
        currentJobName.textContent = 'None';
    }

    // Update events
    eventList.innerHTML = '';
    if (gameData.weeklyEvents.length === 0) {
        selectWeeklyEvents();
    }

    gameData.weeklyEvents.forEach((event, index) => {
        const eventItem = document.createElement('div');
        eventItem.className = 'event-item';
        const costText = event.energyCost > 0 ? `-${event.energyCost} Energy` : `-$${event.moneyCost}`;
        const participateButton = gameData.eventsParticipated >= 3 ? 
            '<button class="action-btn" disabled>Limit Reached</button>' : 
            `<button class="action-btn" onclick="participateInEvent(${index})">Participate</button>`;
        eventItem.innerHTML = `
            <span class="event-name">${event.name}</span>
            <p>Cost: ${costText} | Fame: +${event.fameIncrease}</p>
            ${participateButton}
        `;
        eventList.appendChild(eventItem);
    });
    saveGame();
}

// Participate in an event
function participateInEvent(index) {
    if (gameData.eventsParticipated >= 3) {
        alert('You have already participated in 3 events this week. Wait until next week to participate in more.');
        return;
    }

    const event = gameData.weeklyEvents[index];
    if (event.energyCost > 0) {
        if (gameData.energy < event.energyCost) {
            alert(`Not enough energy! Need at least ${event.energyCost} energy to participate in ${event.name}.`);
            return;
        }
        gameData.energy -= event.energyCost;
    } else {
        if (gameData.money < event.moneyCost) {
            alert(`Not enough money! Need at least $${event.moneyCost} to participate in ${event.name}.`);
            return;
        }
        gameData.money -= event.moneyCost;
    }

    gameData.fameLevel += event.fameIncrease;
    // Only increase listeners if there are released songs/albums
    if (gameData.releasedSongs.length > 0 || gameData.releasedAlbums.length > 0) {
        gameData.monthlyListeners += Math.floor(gameData.monthlyListeners * 0.05) + 100; // Increase listeners by 5% + 100
    }
    gameData.eventsParticipated += 1;
    gameData.lastEventWeek = getCurrentWeekNumber();
    alert(`You participated in ${event.name}! Fame increased by ${event.fameIncrease}.`);

    // Remove the event after participation
    gameData.weeklyEvents.splice(index, 1);
    saveGame();
    updateActivityScreen();
    updateHomeScreen();
    updateSpotifyScreen();
}

// Apply for a job
function applyForJob(jobName, salary) {
    if (gameData.currentJob) {
        if (confirm(`You are currently employed as a ${gameData.currentJob.name}. Do you want to quit your current job to apply for ${jobName}?`)) {
            gameData.currentJob = null;
            gameData.currentJob = { name: jobName, salary: salary };
            alert(`You have been hired as a ${jobName}! You will earn $${salary} per week.`);
            saveGame();
            updateActivityScreen();
        }
    } else {
        gameData.currentJob = { name: jobName, salary: salary };
        alert(`You have been hired as a ${jobName}! You will earn $${salary} per week.`);
        saveGame();
        updateActivityScreen();
    }
}

// Quit job
function quitJob() {
    if (gameData.currentJob) {
        alert(`You have quit your job as a ${gameData.currentJob.name}.`);
        gameData.currentJob = null;
        saveGame();
        updateActivityScreen();
    }
}

// Show a specific screen
function showScreen(screenId) {
    document.querySelectorAll('.screen').forEach(screen => {
        screen.classList.remove('active');
    });
    document.getElementById(screenId).classList.add('active');
    if (screenId === 'home-screen') {
        updateHomeScreen();
    } else if (screenId === 'activity-screen') {
        updateActivityScreen();
    }
}

// Save game data to localStorage
function saveGame() {
    if (currentSlot) {
        const gameDataToSave = { ...gameData, currentDate: gameData.currentDate.toISOString() };
        localStorage.setItem(`musicianGameData_slot${currentSlot}`, JSON.stringify(gameDataToSave));
        saveSlots[currentSlot] = gameDataToSave;
    }
}

// Load game data from localStorage
function loadGame() {
    if (currentSlot) {
        const savedData = localStorage.getItem(`musicianGameData_slot${currentSlot}`);
        if (savedData) {
            const parsedData = JSON.parse(savedData);
            gameData = {
                ...parsedData,
                currentDate: new Date(parsedData.currentDate)
            };
            if (!(gameData.currentDate instanceof Date) || isNaN(gameData.currentDate)) {
                gameData.currentDate = new Date(gameData.yearStarted, 0, 1);
            }
            showScreen('social-platforms');
            updateSocialPlatforms();
        }
    }
}

// Distributor selection
function selectDistributor(distributor) {
    const distributorNames = {
        'onerpm': 'OneRPM',
        'tunecore': 'TuneCore',
        'cdbaby': 'CD Baby',
        'distrokid': 'DistroKid',
        'dittomusic': 'Ditto Music'
    };
    if (confirm(`Did you agree to use ${distributorNames[distributor]} as your distributor?`)) {
        gameData.selectedDistributor = distributor;
        document.getElementById('selected-distributor-name').textContent = `${distributorNames[distributor]} Options`;
        document.querySelector('.distributor-grid').style.display = 'none';
        document.getElementById('distributor-options').style.display = 'block';
        saveGame();
    }
}

// Back to distributor grid
function backToDistributorGrid() {
    document.querySelector('.distributor-grid').style.display = 'grid';
    document.getElementById('distributor-options').style.display = 'none';
}

// Show create song screen
function showCreateSong() {
    if (gameData.energy < 10) {
        alert('Not enough energy! Need at least 10 energy to create a song.');
        return;
    }
    document.getElementById('distributor-options').style.display = 'none';
    document.getElementById('create-song').style.display = 'block';
}

// Cancel create song
function cancelCreateSong() {
    document.getElementById('create-song').style.display = 'none';
    document.getElementById('distributor-options').style.display = 'block';
    document.getElementById('song-img-preview').src = '';
    document.getElementById('song-title').value = '';
    document.getElementById('song-genre').value = 'Pop';
    document.getElementById('studio-budget').value = '';
}

// Confirm create song
function confirmCreateSong() {
    const title = document.getElementById('song-title').value.trim();
    const genre = document.getElementById('song-genre').value;
    const studioBudget = document.getElementById('studio-budget').value;
    const photoInput = document.getElementById('song-photo');

    if (!title) {
        alert('Please enter a song title!');
        return;
    }

    if (!studioBudget) {
        alert('Please select a studio budget!');
        return;
    }

    const studioCost = studioBudgets[studioBudget];
    if (gameData.money < studioCost) {
        alert(`Not enough money! Need at least $${studioCost} to record with ${studioBudget.replace('-', ' ')}.`);
        return;
    }

    let songPhoto = '';
    if (photoInput.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
            songPhoto = e.target.result;
            const song = { title, genre, photo: songPhoto, studio: studioBudget };
            gameData.unreleasedSongs.push(song);
            gameData.energy -= 10;
            gameData.money -= studioCost;
            saveGame();
            cancelCreateSong();
            updateHomeScreen();
        };
        reader.readAsDataURL(photoInput.files[0]);
    } else {
        const song = { title, genre, photo: '', studio: studioBudget };
        gameData.unreleasedSongs.push(song);
        gameData.energy -= 10;
        gameData.money -= studioCost;
        saveGame();
        cancelCreateSong();
        updateHomeScreen();
    }
}

// Show create album screen
function showCreateAlbum() {
    if (gameData.energy < 50) {
        alert('Not enough energy! Need at least 50 energy to create an album.');
        return;
    }
    document.getElementById('distributor-options').style.display = 'none';
    document.getElementById('create-album').style.display = 'block';
}

// Cancel create album
function cancelCreateAlbum() {
    document.getElementById('create-album').style.display = 'none';
    document.getElementById('distributor-options').style.display = 'block';
    document.getElementById('selected-songs-list').innerHTML = '';
    document.getElementById('album-img-preview').src = '';
}

// Show song selection for album
function showSongSelection() {
    document.getElementById('create-album').style.display = 'none';
    document.getElementById('song-selection').style.display = 'block';
    const songList = document.getElementById('unreleased-songs-list');
    songList.innerHTML = '';
    gameData.unreleasedSongs.forEach((song, index) => {
        const songItem = document.createElement('div');
        songItem.className = 'unreleased-item';
        songItem.innerHTML = `
            <span>${song.title}</span>
            <button class="action-btn" onclick="selectSongForAlbum(${index})">Select</button>
        `;
        songList.appendChild(songItem);
    });
}

let selectedSongs = [];

function selectSongForAlbum(index) {
    if (!selectedSongs.includes(index)) {
        selectedSongs.push(index);
        const selectedList = document.getElementById('selected-songs-list');
        const songItem = document.createElement('div');
        songItem.innerHTML = gameData.unreleasedSongs[index].title;
        selectedList.appendChild(songItem);
    }
}

// Confirm song selection
function confirmSongSelection() {
    if (selectedSongs.length < 8) {
        alert('Your album needs at least 8 songs!');
        return;
    }
    document.getElementById('song-selection').style.display = 'none';
    document.getElementById('album-genre-selection').style.display = 'block';
}

// Cancel album genre selection
function cancelAlbumGenre() {
    document.getElementById('album-genre-selection').style.display = 'none';
    document.getElementById('create-album').style.display = 'block';
}

// Confirm create album
function confirmCreateAlbum() {
    const title = document.getElementById('album-title').value.trim();
    const genre = document.getElementById('album-genre').value;
    const photoInput = document.getElementById('album-photo');
    if (!title) {
        alert('Please enter an album title!');
        return;
    }

    let albumPhoto = '';
    if (photoInput.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
            albumPhoto = e.target.result;
            const albumSongs = selectedSongs.map(index => {
                const song = gameData.unreleasedSongs[index];
                return { title: song.title, photo: song.photo, streams: 0 };
            });
            const album = { title, genre, photo: albumPhoto, songs: albumSongs, streams: 0 };
            gameData.unreleasedAlbums.push(album);
            selectedSongs.sort((a, b) => b - a);
            selectedSongs.forEach(index => {
                gameData.unreleasedSongs.splice(index, 1);
            });
            gameData.energy -= 50;
            selectedSongs = [];
            saveGame();
            document.getElementById('album-genre-selection').style.display = 'none';
            document.getElementById('distributor-options').style.display = 'block';
            updateHomeScreen();
        };
        reader.readAsDataURL(photoInput.files[0]);
    } else {
        const albumSongs = selectedSongs.map(index => {
            const song = gameData.unreleasedSongs[index];
            return { title: song.title, photo: song.photo, streams: 0 };
        });
        const album = { title, genre, photo: '', songs: albumSongs, streams: 0 };
        gameData.unreleasedAlbums.push(album);
        selectedSongs.sort((a, b) => b - a);
        selectedSongs.forEach(index => {
            gameData.unreleasedSongs.splice(index, 1);
        });
        gameData.energy -= 50;
        selectedSongs = [];
        saveGame();
        document.getElementById('album-genre-selection').style.display = 'none';
        document.getElementById('distributor-options').style.display = 'block';
        updateHomeScreen();
    }
}

// Show unreleased content
function showUnreleased() {
    document.getElementById('distributor-options').style.display = 'none';
    document.getElementById('unreleased-screen').style.display = 'block';
    const unreleasedList = document.getElementById('unreleased-list');
    unreleasedList.innerHTML = '';

    gameData.unreleasedSongs.forEach((song, index) => {
        const songItem = document.createElement('div');
        songItem.className = 'unreleased-item';
        songItem.innerHTML = `
            <span>${song.title} (Song)</span>
            <div>
                <button class="action-btn" onclick="publishSong(${index})">Publish</button>
                <button class="action-btn" onclick="deleteUnreleasedSong(${index})">Delete</button>
            </div>
        `;
        unreleasedList.appendChild(songItem);
    });

    gameData.unreleasedAlbums.forEach((album, index) => {
        const albumItem = document.createElement('div');
        albumItem.className = 'unreleased-item';
        albumItem.innerHTML = `
            <span>${album.title} (Album)</span>
            <div>
                <button class="action-btn" onclick="publishAlbum(${index})">Publish</button>
                <button class="action-btn" onclick="deleteUnreleasedAlbum(${index})">Delete</button>
            </div>
        `;
        unreleasedList.appendChild(albumItem);
    });
}

// Delete unreleased song
function deleteUnreleasedSong(index) {
    gameData.unreleasedSongs.splice(index, 1);
    saveGame();
    showUnreleased();
}

// Delete unreleased album
function deleteUnreleasedAlbum(index) {
    gameData.unreleasedAlbums.splice(index, 1);
    saveGame();
    showUnreleased();
}

// Publish song
function publishSong(index) {
    const song = gameData.unreleasedSongs.splice(index, 1)[0];
    song.streams = 0;
    song.listeners = 0;
    gameData.releasedSongs.push(song);
    gameData.fameLevel += 0.1;
    gameData.monthlyListeners += Math.floor(gameData.monthlyListeners * 0.1) + 500; // Increase listeners by 10% + 500
    gameData.lastReleaseWeek = getCurrentWeekNumber();
    saveGame();
    showUnreleased();
    updateSpotifyScreen();
}

// Publish album
function publishAlbum(index) {
    const album = gameData.unreleasedAlbums.splice(index, 1)[0];
    album.streams = 0;
    album.listeners = 0;
    album.songs.forEach(song => {
        if (!song.hasOwnProperty('streams')) {
            song.streams = 0;
        }
    });
    gameData.releasedAlbums.push(album);
    gameData.fameLevel += 0.1;
    gameData.monthlyListeners += Math.floor(gameData.monthlyListeners * 0.2) + 1000; // Increase listeners by 20% + 1000
    gameData.lastReleaseWeek = getCurrentWeekNumber();
    saveGame();
    showUnreleased();
    updateSpotifyScreen();
}

// Show released content
function showReleased() {
    document.getElementById('distributor-options').style.display = 'none';
    document.getElementById('released-screen').style.display = 'block';
    const releasedList = document.getElementById('released-list');
    releasedList.innerHTML = '';

    gameData.releasedSongs.forEach(song => {
        const songItem = document.createElement('div');
        songItem.className = 'released-item';
        songItem.innerHTML = `
            <span>${song.title} (Song) - Streams: ${song.streams.toLocaleString()}</span>
        `;
        releasedList.appendChild(songItem);
    });

    gameData.releasedAlbums.forEach(album => {
        const albumItem = document.createElement('div');
        albumItem.className = 'released-item';
        albumItem.innerHTML = `
            <span>${album.title} (Album) - Streams: ${album.streams.toLocaleString()}</span>
        `;
        releasedList.appendChild(albumItem);
    });
}

// Back to distributor options
function backToDistributorOptions() {
    document.getElementById('unreleased-screen').style.display = 'none';
    document.getElementById('released-screen').style.display = 'none';
    document.getElementById('distributor-options').style.display = 'block';
}

// Back to create album
function backToCreateAlbum() {
    document.getElementById('song-selection').style.display = 'none';
    document.getElementById('create-album').style.display = 'block';
}

// Get current week number since the game started
function getCurrentWeekNumber() {
    const startDate = new Date(gameData.yearStarted, 0, 1);
    const currentDate = new Date(gameData.currentDate);
    const diffInTime = currentDate - startDate;
    const diffInDays = diffInTime / (1000 * 3600 * 24);
    return Math.floor(diffInDays / 7);
}

// Next week logic with updated mechanics
function nextWeek() {
    if (!(gameData.currentDate instanceof Date) || isNaN(gameData.currentDate)) {
        gameData.currentDate = new Date(gameData.yearStarted, 0, 1);
    }

    gameData.currentDate.setDate(gameData.currentDate.getDate() + 7);
    const currentWeek = getCurrentWeekNumber();

    // Update age if a year has passed
    updateAge();

    // Determine streams based on fame level
    let songStreamsGained = 0;
    let albumStreamsGained = 0;

    if (gameData.fameLevel <= 0) {
        songStreamsGained = Math.floor(Math.random() * (8 - 5 + 1)) + 5;
        albumStreamsGained = Math.floor(Math.random() * (8 - 5 + 1)) + 5;
    } else if (gameData.fameLevel <= 10) {
        songStreamsGained = Math.floor(Math.random() * (10000 - 1000 + 1)) + 1000;
        albumStreamsGained = Math.floor(Math.random() * (10000 - 1000 + 1)) + 1000;
    } else if (gameData.fameLevel <= 30) {
        songStreamsGained = Math.floor(Math.random() * (100000 - 50000 + 1)) + 50000;
        albumStreamsGained = Math.floor(Math.random() * (100000 - 50000 + 1)) + 50000;
    } else if (gameData.fameLevel <= 50) {
        songStreamsGained = Math.floor(Math.random() * (5000000 - 1000000 + 1)) + 1000000;
        albumStreamsGained = Math.floor(Math.random() * (5000000 - 1000000 + 1)) + 1000000;
    } else if (gameData.fameLevel <= 100) {
        songStreamsGained = Math.floor(Math.random() * (5000000000 - 1000000000 + 1)) + 1000000000;
        albumStreamsGained = Math.floor(Math.random() * (5000000000 - 1000000000 + 1)) + 1000000000;
    }

    // Increment streams for released songs
    let totalStreamsGained = 0;
    gameData.releasedSongs.forEach(song => {
        song.streams = (song.streams || 0) + songStreamsGained;
        totalStreamsGained += songStreamsGained;
    });

    // Increment streams for released albums and their songs
    gameData.releasedAlbums.forEach(album => {
        album.streams = (album.streams || 0) + albumStreamsGained;
        totalStreamsGained += albumStreamsGained;

        album.songs.forEach(song => {
            const songStreamsGainedIndividual = Math.floor(Math.random() * (songStreamsGained / 2)) + (songStreamsGained / 4);
            song.streams = (song.streams || 0) + songStreamsGainedIndividual;
            totalStreamsGained += songStreamsGainedIndividual;
        });
    });

    // Update followers based on streams (500k streams = 10k followers)
    if (totalStreamsGained > 0) {
        const followersGained = Math.floor(totalStreamsGained / 50000); // 500k streams = 10k followers
        gameData.followers += followersGained;
    }

    // Calculate revenue: $0.10 per 1,000 streams
    const revenuePerThousandStreams = 0.10;
    const streamRevenue = Math.floor((totalStreamsGained / 1000) * revenuePerThousandStreams);
    gameData.money += streamRevenue;

    // Apply distributor fees
    if (gameData.selectedDistributor) {
        const fees = {
            'onerpm': 0,
            'tunecore': 10,
            'cdbaby': 35,
            'distrokid': 50,
            'dittomusic': 100
        };
        const fee = fees[gameData.selectedDistributor] || 0;
        if (gameData.currentDate.getMonth() === 0 && gameData.currentDate.getDate() <= 7) {
            gameData.money -= fee;
        }
    }

    // Calculate royalties based on streams
    const totalStreams = gameData.releasedSongs.reduce((sum, song) => sum + (song.streams || 0), 0) +
                        gameData.releasedAlbums.reduce((sum, album) => sum + (album.streams || 0), 0);
    const royaltyRates = {
        'onerpm': 0.3,
        'tunecore': 0.5,
        'cdbaby': 0.7,
        'distrokid': 0.8,
        'dittomusic': 1.0
    };
    const rate = royaltyRates[gameData.selectedDistributor] || 0;
    const earnings = Math.floor(totalStreams * 0.003 * rate);
    gameData.money += earnings;

    // Add weekly salary from job
    if (gameData.currentJob) {
        gameData.money += gameData.currentJob.salary;
    }

    // Check if songs are trending (top songs with high streams)
    let isTrending = false;
    const allSongs = [];
    gameData.releasedSongs.forEach(song => allSongs.push(song));
    gameData.releasedAlbums.forEach(album => album.songs.forEach(song => allSongs.push(song)));
    if (allSongs.length > 0) {
        allSongs.sort((a, b) => (b.streams || 0) - (a.streams || 0));
        const topSong = allSongs[0];
        if (topSong.streams > 1000000) { // Arbitrary threshold for "trending"
            isTrending = true;
        }
    }

    // Decay listeners if no recent releases (after 3-4 months, i.e., 12-16 weeks)
    if (gameData.lastReleaseWeek !== null && (currentWeek - gameData.lastReleaseWeek) > 12) {
        if (!isTrending) {
            const weeksSinceLastRelease = currentWeek - gameData.lastReleaseWeek;
            const decayRate = 0.005 * (weeksSinceLastRelease - 12); // 0.5% decay per week after 12 weeks
            const listenerDecay = Math.floor(gameData.monthlyListeners * decayRate);
            gameData.monthlyListeners = Math.max(0, gameData.monthlyListeners - listenerDecay);
        }
    }

    // Increase listeners if songs are trending
    if (isTrending) {
        gameData.monthlyListeners += Math.floor(gameData.monthlyListeners * 0.02) + 100; // Increase by 2% + 100
    }

    // Decay fame if no recent events (after 5-6 months, i.e., 20-24 weeks)
    if (gameData.lastEventWeek !== null && (currentWeek - gameData.lastEventWeek) > 20) {
        const weeksSinceLastEvent = currentWeek - gameData.lastEventWeek;
        const fameDecayRate = 0.002 * (weeksSinceLastEvent - 20); // 0.2% fame decay per week after 20 weeks
        const fameDecay = gameData.fameLevel * fameDecayRate;
        gameData.fameLevel = Math.max(0, gameData.fameLevel - fameDecay);
    }

    // Reset energy to 100 every week
    gameData.energy = 100;

    // Reset event participation count and refresh events
    gameData.eventsParticipated = 0;
    selectWeeklyEvents();

    saveGame();
    updateHomeScreen();
    updateSpotifyScreen();
}</script></body></html>